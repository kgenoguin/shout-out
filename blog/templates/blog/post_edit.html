{% extends 'base.html' %}

{% block content %}
  <center>
    <div class = "panel panel-info">
      <div class = "panel-heading">
        <h3>Add a new blog!</h3>
      </div>

      <div class = "panel-body">
        <a href="{% url 'blog:post_new' %}" class="btn btn-info" role="button">Add New Post</a><br>
      </div>

    </div>
  </center>
  {% for post in posts %}
    <center>
    <div class = "panel panel-info">
        <div class = "panel-heading">
          <h1><a href="{% url 'blog:post_detail' pk=post.pk %}">{{ post.title }}</a></h1>
        </div>

        <div class = "panel-body">
          <p>Created on: {{ post.created_date }}</p>
          <p>Made by: <a href = "">{{ post.author }}</a></p>
          <h3>{{ post.text|linebreaksbr }}</h3>
          <a href="{% url 'blog:add_comment_to_post' pk=post.pk %}"><span class="glyphicon glyphicon-comment"></span> {{ post.comments.count }}</a>
        </div>
    </div>
    </center>
  {% endfor %}

  <center>
    <div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Edit Post</h4>
          </div>
          <div class="modal-body">
            <form method="POST" enctype = "multipart/form-data" class="post-form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="save btn btn-primary">Save</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </center>

  <script type = 'text/javascript'>
    $(window).load(function(){
        $('#edit').modal('show');
    });
  </script>
{% endblock %}
