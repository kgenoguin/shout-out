{% extends 'base.html' %}

{% block content %}
  {% for post in posts %}
    <center>
      <div class = "panel panel-info">
          <div class = "panel-heading">
            <h1><a href="{% url 'blog:post_detail' pk=post.pk %}">{{ post.title }}</a></h1>
          </div>

          <div class = "panel-body">
            <p>Created on: {{ post.created_date }}</p>
            <p>Made by: <a href = "">{{ post.author }}</a></p>
            <h3>{{ post.text|linebreaksbr }}</h3>
            <a href="{% url 'blog:add_comment_to_post' pk=post.pk %}">Comments: {{ post.comments.count }}</a>
          </div>
      </div>
    </center>
  {% endfor %}
  <center><a href="{% url 'blog:post_new' %}" class="btn btn-info" role="button">Add New Post</a></center><br>

  <center>
    <div class="modal fade" id="addcomment" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">Edit Post</h4>
          </div>
          <div class="modal-body">
            <form method="POST" enctype = "multipart/form-data" class="post-form">
                {% csrf_token %}
                {{ form.as_p }}
                <button type="submit" class="save btn btn-primary">Save</button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </center>

  <script type = 'text/javascript'>
    $(window).load(function(){
        $('#addcomment').modal('show');
    });
  </script>
{% endblock %}
